"use strict";angular.module("twsArticleQuantity",["twsArticleService","twsApi"]),angular.module("twsArticleQuantity").directive("twsArticleQuantity",["twsApi.Jed","twsArticleService.ArticleService","$q","twsApi.Locale",function(t,i,e,n){return{restrict:"E",scope:{articleUid:"=articleUid"},templateUrl:"tws-article-quantity/templates/twsArticleQuantity.html",link:function(e,a,s){t(e,"tws-article-quantity"),e.lang=n.language(),e.$watch("articleUid",function(t){t&&i.update(e.articleUid).then(function(t){if(e.article=t.article,void 0!==e.article.choiceSchema[e.lang].properties){e.choices=e.article.choiceSchema[e.lang].properties,e.originalSettings=e.choices.quantity,e.model=t.schemaForm.model;var i=e.originalSettings;e.settings={"default":angular.isDefined(i["default"])?i["default"]:1,divisibleBy:angular.isDefined(i.divisibleBy)?i.divisibleBy:1,minimum:angular.isDefined(i["default"])?i["default"]:angular.isDefined(i.divisibleBy)?i.divisibleBy:1,maximum:i.maximum},e.divisibleBy=Big(e.settings.divisibleBy)}})}),e.inc=function(){var t=Big(e.model.quantity);t=t.plus(e.divisibleBy),e.settings.maximum&&1===t.cmp(e.settings.maximum)?e.model.quantity=e.settings.maximum:e.model.quantity=parseFloat(t.toString())},e.dec=function(){var t=Big(e.model.quantity);t=t.minus(e.divisibleBy),e.settings.minimum&&-1===t.cmp(e.settings.minimum)?e.model.quantity=e.settings.minimum:e.model.quantity=parseFloat(t.toString())}}}}]),angular.module("twsArticleQuantity").run(["$templateCache",function(t){t.put("tws-article-quantity/templates/twsArticleQuantity.html",'<div ng-show="article.uid && originalSettings"><div class="row"><div class="form-group col-md-5" ng-class="{\'has-error\': ngModel.$dirty && ngModel.$invalid, \'has-success\': ngModel.$dirty && ngModel.$valid }"><label class="control-label">{{::gettext(\'Quantity\')}}</label><div class="input-group"><span class="input-group-btn"><button class="btn btn-default" ng-click="dec()" type="button">-</button></span> <input type="number" name="quantity" ng-max="settings.maximum" ng-min="settings.minimum" step="{{ settings.divisibleBy || \'any\'}}" class="form-control" required="" tws-article-validate-step="" ng-model="model.quantity"> <span class="input-group-btn"><button class="btn btn-default" ng-click="inc()" type="button">+</button></span></div></div></div><div class="row"><div class="col-sm-12 help-block"><span ng-show="ngModel.$error.step">{{ ::gettext(\'This value doesn\\\'t have the right number of decimals.\') }}</span> <span ng-show="ngModel.$error.min">{{ ::gettext(\'This value is too small.\') }}</span> <span ng-show="ngModel.$error.max">{{ ::gettext(\'This value is too large.\') }}</span> <span ng-show="ngModel.$error.required">{{ ::gettext(\'This is required.\') }}</span> <span ng-show="ngModel.$error.number">{{ ::gettext(\'Invalid value.\') }}</span></div></div></div>')}]);